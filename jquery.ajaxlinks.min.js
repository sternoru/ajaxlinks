(function(a){a.fn.ajaxlinks=function(b){var c={load_to:"#content",load_from:null,loader:"<span>Loading...</span>",callback:null,use_sammy:false,prefix:"",smooth_height:true};var d=a.extend(c,b);d.links=this;var e="";var f=function(b){var c={};if(typeof a.sammy=="function"&&d.use_sammy==true){var f=b.split("|");for(var g=0,h=f.length;g<h;g++){var i=f[g].split("=");if(i.length>2){var j=i[1];for(g=2;g<i.length;g++){var j=[j,"=",i[g]].join("")}c[i[0]]=j}else{c[i[0]]=i[1]}}}else{c.path=b}var k=function(e,f,g){if(d.smooth_height){m.height("auto")}var h=a(this).html();if(d.load_from&&e){if(a(this).find(d.load_from).length>0){h=a(this).find(d.load_from).html();m.html(h)}else{h=e;m.html(h)}}if(d.callback){var i=d.links.filter('[href*="'+b+'"]');d.callback(h,i,c)}};e=c.path;var l=d.load_from?[c.path,d.load_from].join(" "):c.path,m=a(d.load_to);if(d.smooth_height){m.height(m.height())}m.html(a(d.loader)).load(l,k)};if(typeof a.sammy=="function"&&d.use_sammy==true){if(a.sammy.apps==undefined){var g=a.sammy(function(){this.get(/\#!(.*)/,function(a){f(window.location.href.split("#!")[1])})});a(function(){g.run()})}this.each(function(b,c){var e=a(c).attr("href");if(e!=undefined&&e.indexOf("#!")==-1){a(c).attr("href",[d.prefix,"#!path=",e].join(""))}})}else{this.each(function(b,c){a(c).bind("click",function(){f(a(this).attr("href"));return false})})}}})(jQuery)